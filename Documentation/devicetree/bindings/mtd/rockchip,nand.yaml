# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mtd/rockchip,nand.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Rockchip SoCs NAND FLASH Controller (NFC) Device Tree Bindings

allOf:
  - $ref: "nand-controller.yaml"

maintainers:
  - Yifeng Zhao <yifeng.zhao@rock-chips.com>

properties:
  "#address-cells": true
  "#size-cells": true

  compatible:
    enum:
      - rockchip,px30_nfc
      - rockchip,rk3308_nfc
      - rockchip,rv1108_nfc
      - rockchip,rk3066_nfc
      - rockchip,rk3188_nfc
      - rockchip,rk3288_nfc
      - rockchip,rk3368_nfc
      - rockchip,rk2928_nfc
      - rockchip,rk3036_nfc
      - rockchip,rk3128_nfc
      - rockchip,rk3228_nfc

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  clocks:
    items:
      - description: Module Clock
      - description: Bus Clock

  clock-names:
    items:
      - const: nfc
      - const: ahb

patternProperties:
  "^nand@[0-3]$":
    type: object
    properties:
      reg:
        minimum: 0
        maximum: 3

      nand-ecc-step-size:
        const: 1024

      nand-ecc-strength:
        enum: [16, 24 , 40, 60, 70]

      nand-bus-width:
        const: 8

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names

examples:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    #include <dt-bindings/clock/rk3308-cru.h>
    nfc: nand-controller@ff4b0000 {
      compatible = "rockchip,nfc";
      reg = <0x0 0xff4b0000 0x0 0x4000>;
      interrupts = <GIC_SPI 81 IRQ_TYPE_LEVEL_HIGH>;
      clocks = <&cru SCLK_NANDC>, <&cru HCLK_NANDC>;
      clock-names = "nfc", "ahb";
      assigned-clocks = <&clks SCLK_NANDC>;
      assigned-clock-rates = <150000000>;

      pinctrl-names = "default";
      pinctrl-0 = <&flash_csn0 &flash_rdy &flash_ale &flash_cle
                  &flash_wrn &flash_rdn &flash_bus8>;

      #address-cells = <1>;
      #size-cells = <0>;
      nand@0 {
        reg = <0>;
        nand-ecc-mode = "hw";
        nand-ecc-strength = <16>;
        nand-ecc-step-size = <1024>;
        nand-bus-width = <8>;
      };
    };

...
